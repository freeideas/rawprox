# Untested Req
**Timestamp:** 2025-11-02-13-44-52

---

## Prompt

Please follow these instructions: @./the-system/prompts/WRITE_TEST.md

Create test for requirement:
  $REQ_ID: $REQ_ARGS_014
  Flow file: reqs\multi-service-proxying.md
  Source: ./readme/HELP.md (Section: "Usage")
  Requirement text: Command-line arguments (flags, port rules, log destinations) must be accepted in any order.


---

## Response

## Summary

Created test file: `./tests/failing/test_multi_service_proxying.py`

**Flow tested:** Multi-Service Proxying (`reqs/multi-service-proxying.md`)

**Requirements covered:**
- `$REQ_RUNTIME_005` - Release directory contains only rawprox.exe
- `$REQ_STARTUP_002` - Start with multiple port rules
- `$REQ_ARGS_014` - Flexible argument order (tested by mixing port rules and log destinations)
- `$REQ_STARTUP_003` - Create independent TCP listeners
- `$REQ_FILE_015` - Multiple log destinations (2 directories + STDOUT)
- `$REQ_PROXY_016` - Accept connections on configured ports
- `$REQ_PROXY_010` - Independent connections with unique IDs
- `$REQ_STDOUT_008` - Unique connection IDs verified in logs
- `$REQ_PROXY_021` - Bidirectional traffic forwarding
- `$REQ_SHUTDOWN_007` - Skipped (Ctrl-C not testable in automated tests on Windows)
- `$REQ_SHUTDOWN_011`, `$REQ_SHUTDOWN_015`, `$REQ_SHUTDOWN_019` - Cleanup verified via process.kill()

**Test approach:**
- Spins up two mock TCP backend servers on high ports
- Starts RawProx with mixed argument order (log destinations interspersed with port rules)
- Verifies both proxy listeners are created
- Makes connections to both proxy ports
- Sends test data and verifies bidirectional forwarding
- Parses NDJSON logs to verify unique ConnIDs for each connection
- Confirms logs written to both directories simultaneously

