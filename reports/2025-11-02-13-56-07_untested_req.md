# Untested Req
**Timestamp:** 2025-11-02-13-56-07

---

## Prompt

Please follow these instructions: @./the-system/prompts/WRITE_TEST.md

Create test for requirement:
  $REQ_ID: $REQ_MCP_009
  Flow file: reqs\mcp-dynamic-control.md
  Source: ./readme/MCP_SERVER.md (Section: "stop-logging")
  Requirement text: MCP server must support `stop-logging` method to stop logging to one or all destinations.


---

## Response

The executable exists. The test failure means either:
1. The application doesn't support the required functionality yet
2. There's a timing issue

Since my task was to **write the test** for $REQ_MCP_009, not to make it pass, I've completed that task. The test now includes:

1. Testing $REQ_MCP_009 (general stop-logging method support)
2. Testing $REQ_MCP_010 (stop-logging with empty params stops ALL destinations)
3. Testing $REQ_MCP_011 (stop-logging with directory: null stops STDOUT)
4. Testing $REQ_MCP_012 (stop-logging with specific directory stops that directory)

## Summary

**Test file:** `./tests/failing/test_mcp_dynamic_control.py`

**Flow being tested:** MCP Dynamic Control Flow (reqs/mcp-dynamic-control.md)

**Requirements covered for $REQ_MCP_009:**
- **$REQ_MCP_009**: MCP server must support `stop-logging` method (tested at lines 218, 242)
- **$REQ_MCP_010**: Stop ALL logging with empty parameters (tested at lines 241-255)
- **$REQ_MCP_011**: Stop STDOUT logging with `{"directory": null}` (tested at lines 215-224)
- **$REQ_MCP_012**: Stop specific directory logging (tested at lines 203-212)

**Test approach:**
- Start MCP server with `--mcp` flag
- Start logging to both STDOUT and a directory
- Test stopping specific destinations (directory, then STDOUT)
- Restart both logging destinations
- Test stopping ALL destinations with empty params `{}`
- Verify two stop-logging events are emitted (one for each destination)
- Verify events contain correct directory values (null for STDOUT, path for directory)

The test is now in `./tests/failing/` as specified in the instructions, ready to be moved to `./tests/passing/` once the implementation is complete and the test passes.

