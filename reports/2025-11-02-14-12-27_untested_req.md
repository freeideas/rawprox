# Untested Req
**Timestamp:** 2025-11-02-14-12-27

---

## Prompt

Please follow these instructions: @./the-system/prompts/WRITE_TEST.md

Create test for requirement:
  $REQ_ID: $REQ_SHUTDOWN_001
  Flow file: reqs\file-logging-session.md
  Source: ./README.md (Section: "Stopping")
  Requirement text: RawProx must shut down gracefully when receiving Ctrl-C signal.


---

## Response

Perfect! The test file already exists and covers the entire file logging session flow. Looking at the requirements:

- **$REQ_SHUTDOWN_001** (Ctrl-C Graceful Shutdown) is mentioned in the flow at line 175-179
- The test file already acknowledges at line 370 that Ctrl-C cannot be tested on Windows: `# Stop RawProx (cannot test Ctrl-C on Windows, using kill instead)`
- The instructions explicitly state (lines 223-232 of WRITE_TEST.md) to NOT test Ctrl-C/SIGINT because it propagates to the parent process on Windows

The test file properly covers all testable requirements in the flow, including shutdown behaviors that CAN be tested ($REQ_SHUTDOWN_010, $REQ_SHUTDOWN_014, $REQ_SHUTDOWN_018). The $REQ_SHUTDOWN_001 requirement about Ctrl-C is valid but untestable in automated tests per the instructions.

## Summary

Test file already exists: **./tests/failing/test_file_logging_session.py**

**Flow tested:** File Logging Session (reqs/file-logging-session.md)

**Requirements covered:** All testable requirements in the flow:
- Startup: $REQ_STARTUP_001, $REQ_STARTUP_004
- Arguments: $REQ_ARGS_008, $REQ_ARGS_009, $REQ_ARGS_010, $REQ_ARGS_013
- File logging: $REQ_FILE_001 through $REQ_FILE_018
- Proxy: $REQ_PROXY_001, $REQ_PROXY_002, $REQ_PROXY_003
- Stdout events: $REQ_STDOUT_005, $REQ_STDOUT_006, $REQ_STDOUT_007
- Shutdown: $REQ_SHUTDOWN_010, $REQ_SHUTDOWN_014, $REQ_SHUTDOWN_018

**Requirements skipped:** $REQ_SHUTDOWN_001 (Ctrl-C) -- cannot be tested on Windows per instructions (signals propagate to parent process)

**Test approach:** Standalone Python script that starts RawProx with file logging, creates a target server, proxies traffic, verifies all events are logged correctly with proper buffering/flushing, tests file rotation and append mode, and verifies clean shutdown with final flush.

